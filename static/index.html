<html>
    <head>
        <title>three.js app</title>
        <style>canvas { width: 100%; height: 100% }</style>
    </head>
    <body>
        <script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
        <script>
            var radius = 200, deep = 1;

            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            var GROUP = new THREE.Object3D();
            scene.add(GROUP);

            var labelGroup = new THREE.Object3D();
            scene.add(labelGroup);

            var geometry = new THREE.SphereGeometry(10, 15, 15);
            var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
            var sphere = new THREE.Mesh(geometry, material);
            //sphere.position.set(0,50,0);
            GROUP.add(sphere);

            var lineMaterial = new THREE.LineBasicMaterial({
                color: 0x0000ff
            });

            function addLabel(obj, text) {
                var canvas1 = document.createElement('canvas');
                var context1 = canvas1.getContext('2d');
                context1.font = "Bold 10px Arial";
                context1.fillStyle = "rgba(255,0,0,0.95)";
                context1.fillText('Hello, world!', 0, 50);
                var texture1 = new THREE.Texture(canvas1) 
                texture1.needsUpdate = true;
                var material1 = new THREE.MeshBasicMaterial( {map: texture1, side:THREE.DoubleSide } );
                material1.transparent = true;
                var mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(canvas1.width, canvas1.height),material1);
                mesh1.userData = obj;
                labelGroup.add( mesh1 );
            }

            var count = 5;
            for (var i = 0; i < count; i++) {
                var sp = new THREE.Mesh(geometry, material);
                var r = deep*radius;
                sp.position.z = 0;//i*50;
                sp.position.x = radius*deep;//radius*deep;
                sp.position.y = sphere.position.y - count*80/2 + i*80;
                GROUP.add(sp);
                var lineGeometry = new THREE.Geometry();
                lineGeometry.vertices.push(new THREE.Vector3(sp.position.x, sp.position.y, sp.position.z));
                lineGeometry.vertices.push(new THREE.Vector3(sphere.position.x, sphere.position.y, sphere.position.z));
                var l = new THREE.Line(lineGeometry, lineMaterial);
                GROUP.add(l);
                addLabel(sp, "LABEL num " + i);
            }

            camera.position.z = 500;

            // addLabel();

            function render() {
                labelGroup.children.forEach(function (mesh1) {
                    var obj = mesh1.userData;
                    var vector = obj.geometry.vertices[i].clone();
                    vector.applyMatrix4( obj.matrixWorld );
                    vector.x += 120;
                    mesh1.position = vector;
                });
                renderer.render(scene, camera);
            }

            (function (dom) {
                var mousemove = false,
                    startX, startY;

                dom.addEventListener('mousedown', function(ev) {
                    mousemove = true;
                    startX = ev.clientX;
                    startY = ev.clientY;
                    posX = camera.position.x;
                    posY = camera.position.y;
                }, false);

                dom.addEventListener('mouseup', function() {
                    mousemove = false;
                }, false);

                dom.addEventListener('mousemove', function(ev) {
                    if (!mousemove) return;
                    // console.log(startX, ev.clientX, document.innerWidth);
                    var dx = (startX - ev.clientX)/window.innerWidth/5;
                    var dy = (startY - ev.clientY)/window.innerHeight/5;
                    var v = new THREE.Vector3(dx,dy,0);
                    
                    GROUP.rotateY(-dx);
                    GROUP.rotateX(-dy);
                    
                    requestAnimationFrame(render);
                }, false);
            })(renderer.domElement);

            render();
            render();
        </script>
    </body>
</html>